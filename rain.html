<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>20. RAIN &mdash; Cloud Computing Book 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-2.3.2/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/cosmo/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-2.3.2/css/bootstrap-responsive.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Cloud Computing Book 0.1 documentation" href="index.html" />
    <link rel="next" title="21. Pegasus (Matts)" href="pegasus.html" />
    <link rel="prev" title="19. Precip" href="precip.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="index.html">Contents</a>
        <span class="navbar-text pull-left"><b>0.1</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
              <li class="dropdown globaltoc-container">
  <a href="index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="todolist.html">1. Todo List</a></li>
<li class="toctree-l1"><a class="reference internal" href="plan.html">2. Plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="title.html">3.   Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="preface.html">4. Preface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="preface.html#citation-for-publications">4.1. Citation for Publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#acknowledgement">4.2. Acknowledgement</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#sponsors">4.3. Sponsors</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#about-this-manual">4.4. About this Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#conventions">4.5. Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">5. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#executive-summary">5.1. Executive Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#project-and-account-application">5.2. Project and Account Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#services">5.3. Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#hardware">5.4. Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="introduction.html#support">5.5. Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="account.html">6. Project and Account Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="account.html#terminology">6.1. Terminology</a></li>
<li class="toctree-l2"><a class="reference internal" href="account.html#quickstart">6.2. Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="account.html#projects-and-accounts-for-xsede-users">6.3. Projects and Accounts for XSEDE users</a></li>
<li class="toctree-l2"><a class="reference internal" href="account.html#project-management">6.4. Project Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="account.html#upload-a-ssh-public-key">6.5. Upload a SSH Public Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="account.html#upload-an-openid">6.6. Upload an OpenId</a></li>
<li class="toctree-l2"><a class="reference internal" href="account.html#accessing-futuregrid-resources">6.7. Accessing FutureGrid Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="account.html#manage-a-class-on-futuregrid">6.8. Manage a Class on FutureGrid</a></li>
<li class="toctree-l2"><a class="reference internal" href="account.html#mini-faq">6.9. Mini FAQ</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security.html">7. Using SSH keys</a><ul>
<li class="toctree-l2"><a class="reference internal" href="security.html#using-ssh-from-windows">7.1. Using SSH from Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#generate-a-ssh-key">7.2. Generate a SSH key</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#add-or-replace-passphrase-for-an-already-generated-key">7.3. Add or Replace Passphrase for an Already Generated Key</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#upload-the-key-to-the-futuregrid-portal">7.4. Upload the key to the FutureGrid Portal</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#testing-your-ssh-key">7.5. Testing your ssh key</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#testing-your-ssh-key-for-hotel">7.6. Testing your ssh key for Hotel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="status.html">8. Status</a></li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">9. Hardware</a><ul>
<li class="toctree-l2"><a class="reference internal" href="hardware.html#compute-resources">9.1. Compute Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="hardware.html#networks">9.2. Networks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hpc.html">10. HPC Services (assigned to Allen and Koji)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#accessing-systems">10.1. Accessing Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#filesystem-layout">10.2. Filesystem Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#modules">10.3. Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#managing-applications-with-torque">10.4. Managing Applications with Torque</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#message-passing-interface-mpi">10.5. Message Passing Interface (MPI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#mpi-libraries">10.6. MPI Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#compiling-mpi-applications">10.7. Compiling MPI Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#running-mpi-applications">10.8. Running MPI Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#working-with-hpc-job-services">10.9. Working with HPC Job Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#xray-hpc-services">10.10. Xray HPC Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc.html#storage-services">10.11. Storage Services</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scalemp.html">11. ScaleMP vSMP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="scalemp.html#accessing-scalemp">11.1. Accessing ScaleMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="scalemp.html#submitting-a-job">11.2. Submitting a job</a></li>
<li class="toctree-l2"><a class="reference internal" href="scalemp.html#developing-a-job-script">11.3. Developing a job script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="openstack.html">12. OpenStack Essex with euca2ools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#prerequisits">12.1. Prerequisits</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#log-into-india">12.2. Log into India</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#system-variable-user">12.3. System Variable $USER</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#account-and-credentials">12.4. Account and Credentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#euca2ools-ec2-client-tools">12.5. Euca2ools (EC2 client tools)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#testing-your-setup">12.6. Testing Your Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#list-of-common-images">12.7. List of Common Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#vm-types">12.8. VM Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#key-management">12.9. Key Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#image-instantiation">12.10. Image Instantiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#rename-server-names">12.11. Rename Server Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#monitoring-instances">12.12. Monitoring Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#log-into-your-vm">12.13. Log into your VM</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#nova-volumes-not-available">12.14. Nova Volumes (Not available)</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#volume-snapshots">12.15. Volume Snapshots</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#image-registration">12.16. Image Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#delete-your-images">12.17. Delete your images</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#terminate-your-vms">12.18. Terminate your VMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#limitations">12.19. Limitations</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#troubleshooting">12.20. Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack.html#compatibility-between-nova-and-euca2ools-commands">12.21. Compatibility between nova and euca2ools commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="openstack-grizzly.html">13. OpenStack Grizzly (Gregor)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="openstack-grizzly.html#from-zero-to-get-your-first-instance-running">13.1. From zero to get your first instance running</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack-grizzly.html#use-block-storage">13.2. Use Block Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack-grizzly.html#set-up-external-access-to-your-instance">13.3. Set up external access to your instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack-grizzly.html#make-a-snapshot-of-an-instance">13.4. Make a snapshot of an instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack-grizzly.html#automate-some-initial-configuration">13.5. Automate some initial configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack-grizzly.html#get-the-latest-version-of-ubuntu-cloud-image-and-upload-it-to-the-openstack">13.6. Get the latest version of Ubuntu Cloud Image and upload it to the OpenStack</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack-grizzly.html#delete-your-instance">13.7. Delete your instance</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack-grizzly.html#how-to-change-your-password">13.8. How to change your password</a></li>
<li class="toctree-l2"><a class="reference internal" href="openstack-grizzly.html#things-to-do-when-you-need-euca2ools-or-ec2-interfaces">13.9. Things to do when you need Euca2ools or EC2 interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="eucalyptus.html">14. Eucalyptus  (Allen)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="eucalyptus.html#requirements">14.1. Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="eucalyptus.html#account-creation">14.2. Account Creation</a></li>
<li class="toctree-l2"><a class="reference internal" href="eucalyptus.html#resources-overview">14.3. Resources Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="eucalyptus.html#testing-your-setup">14.4. Testing Your Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="eucalyptus.html#image-deployment">14.5. Image Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="eucalyptus.html#logging-into-the-vm">14.6. Logging Into the VM</a></li>
<li class="toctree-l2"><a class="reference internal" href="eucalyptus.html#vm-network-info">14.7. VM Network Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="eucalyptus.html#image-management">14.8. Image Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="eucalyptus.html#status-of-deployments">14.9. Status of Deployments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="iaas.html">15. IaaS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="iaas.html#nimbus-clouds">15.1. Nimbus Clouds</a></li>
<li class="toctree-l2"><a class="reference internal" href="iaas.html#openstack-clouds">15.2. OpenStack Clouds</a></li>
<li class="toctree-l2"><a class="reference internal" href="iaas.html#eucalyptus-clouds">15.3. Eucalyptus Clouds</a></li>
<li class="toctree-l2"><a class="reference internal" href="iaas.html#virtual-appliances-for-training-and-education">15.4. Virtual Appliances for Training and Education</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nimbus.html">16. Using Nimbus on FutureGrid</a><ul>
<li class="toctree-l2"><a class="reference internal" href="nimbus.html#nimbus-on-futuregrid">16.1. Nimbus on FutureGrid</a></li>
<li class="toctree-l2"><a class="reference internal" href="nimbus.html#getting-started">16.2. Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="nimbus.html#using-the-cloud-client">16.3. Using the Cloud Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="nimbus.html#virtual-clusters">16.4. Virtual Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="nimbus.html#cloud-quick-start-launch-a-vm-with-1-command">16.5. Cloud Quick Start : Launch a VM with 1 command</a></li>
<li class="toctree-l2"><a class="reference internal" href="nimbus.html#launch-a-vm-via-nimbus">16.6. Launch A VM via Nimbus</a></li>
<li class="toctree-l2"><a class="reference internal" href="nimbus.html#using-other-nimbus-clouds-on-futuregrid">16.7. Using Other Nimbus Clouds on FutureGrid</a></li>
<li class="toctree-l2"><a class="reference internal" href="nimbus.html#launching-multiple-vms">16.8. Launching Multiple VMs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nimbus-phantom.html">17. Nimbus Phantom</a></li>
<li class="toctree-l1"><a class="reference internal" href="nimbus-cloudinitd.html">18. cloudinit.d</a></li>
<li class="toctree-l1"><a class="reference internal" href="precip.html">19. Precip</a><ul>
<li class="toctree-l2"><a class="reference internal" href="precip.html#installation">19.1. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="precip.html#api">19.2. API</a></li>
<li class="toctree-l2"><a class="reference internal" href="precip.html#examples">19.3. Examples</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">20. RAIN</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#generate-and-register-an-os-image-on-futuregrid-using-the-fg-shell">20.1. Generate and Register an OS Image on FutureGrid using the FG Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#futuregrid-standalone-image-repository">20.2. FutureGrid Standalone Image Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="#manual-image-customization">20.3. Manual Image Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rain-manual-pages">20.4. RAIN Manual Pages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pegasus.html">21. Pegasus (Matts)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pegasus.html#the-pegasus-run-time-cloud-architecture">21.1. The Pegasus Run-Time Cloud Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="pegasus.html#using-pegasus-on-futuregrid">21.2. Using Pegasus on FutureGrid</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="vine.html">22. ViNe (Mauritsio/Renato)</a></li>
<li class="toctree-l1"><a class="reference internal" href="unicore.html">23. Unicore</a><ul>
<li class="toctree-l2"><a class="reference internal" href="unicore.html#unicore-6-on-futuregrid-user-manual">23.1. UNICORE 6 on FutureGrid User Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicore.html#introduction">23.2. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicore.html#what-is-unicore">23.3. What is UNICORE?</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicore.html#connecting-to-the-unicore-bes-endpoints-from-other-grid-middleware-clients">23.4. Connecting to the UNICORE BES Endpoints From Other Grid Middleware Clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicore.html#connecting-to-the-unicore-bes-endpoints-using-a-unicore-commandline-client">23.5. Connecting to the UNICORE BES Endpoints Using a UNICORE Commandline Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicore.html#running-jobs-on-unicore-sites">23.6. Running Jobs on UNICORE Sites</a></li>
<li class="toctree-l2"><a class="reference internal" href="unicore.html#deploying-a-new-unicore-6-grid">23.7. Deploying a New UNICORE 6 Grid</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="genesis.html">24. Genesis II</a><ul>
<li class="toctree-l2"><a class="reference internal" href="genesis.html#introduction">24.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="genesis.html#what-is-genesisii">24.2. What is GenesisII</a></li>
<li class="toctree-l2"><a class="reference internal" href="genesis.html#connecting-to-the-genesisii-bes-endpoints">24.3. Connecting to the GenesisII BES Endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="genesis.html#using-the-futuregrid-genesisii-endpoints-as-a-client">24.4. Using the Futuregrid GenesisII Endpoints as a Client</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">25. Tutorials (Renato/Mauritsio)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#tutorial-topic-0-accessing-futuregrid-resources">25.1. Tutorial Topic 0: Accessing FutureGrid Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#tutorial-topic-1-cloud-provisioning-platforms">25.2. Tutorial Topic 1: Cloud Provisioning Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#tutorial-topic-2-cloud-run-time-map-reduce-platforms">25.3. Tutorial Topic 2: Cloud Run-time Map/Reduce Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#tutorial-topic-3-grid-appliances-for-training-education-and-outreach">25.4. Tutorial Topic 3: Grid Appliances for Training, Education, and Outreach</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#tutorial-topic-4-high-performance-computing">25.5. Tutorial Topic 4: High Performance Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#tutorial-topic-5-experiment-management">25.6. Tutorial Topic 5: Experiment Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#tutorial-topic-6-image-management-and-rain">25.7. Tutorial Topic 6: Image Management and Rain</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#tutorial-topic-7-storage">25.8. Tutorial Topic 7:  Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html#other-tutorials-and-educational-materials">25.9. Other Tutorials and Educational Materials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="papi.html">26. PAPI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="papi.html#availability">26.1. Availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="papi.html#references">26.2. References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gpu.html">27. Delta GPU User Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gpu.html#running-mpi-gpu-program-on-the-delta-cluster">27.1. Running MPI/GPU program on the Delta cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpu.html#running-programs-on-a-single-gpu">27.2. Running programs on a single GPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpu.html#c-means-clustering-using-cuda-on-gpu">27.3. C-means clustering using CUDA on GPU</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fgmanual.html">28. Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fgmanual.html#step-4-explore-the-documentation">28.1. Step 4: Explore the Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="fgmanual.html#training-and-education">28.2. Training and Education</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fgmanual.html#guide-to-using-the-futuregrid-portal">29. Guide to Using the FutureGrid Portal</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fgmanual.html#functions-of-the-futuregrid-portal">29.1. Functions of the FutureGrid Portal</a></li>
<li class="toctree-l2"><a class="reference internal" href="fgmanual.html#a-futuregrid-user-dashboard">29.2. A FutureGrid User Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="fgmanual.html#update-project-information-and-add-results">29.3. Update Project Information and Add Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="fgmanual.html#contribute-to-the-futuregrid-community">29.4. Contribute to the FutureGrid Community</a></li>
<li class="toctree-l2"><a class="reference internal" href="fgmanual.html#file-upload-and-attachment-to-a-page">29.5. File Upload and Attachment to a Page</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fgmanual.html#alamo">30. Alamo</a></li>
<li class="toctree-l1"><a class="reference internal" href="fgmanual.html#iaas-infrastructure-as-a-service">31. IaaS - Infrastructure as a Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="fgmanual.html#using-iaas-clouds-on-futuregrid">32. Using IaaS Clouds on FutureGrid</a></li>
<li class="toctree-l1"><a class="reference internal" href="fgmanual.html#management-services">33. Management Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="fgmanual.html#commandline-clients">34. Commandline clients</a></li>
</ul>
</ul>
</li>
              <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">20. RAIN</a><ul>
<li><a class="reference internal" href="#generate-and-register-an-os-image-on-futuregrid-using-the-fg-shell">20.1. Generate and Register an OS Image on FutureGrid using the FG Shell</a><ul>
<li><a class="reference internal" href="#request-access">20.1.1. Request access</a></li>
<li><a class="reference internal" href="#log-into-india">20.1.2. Log into India</a></li>
<li><a class="reference internal" href="#start-the-shell">20.1.3. Start the Shell</a></li>
<li><a class="reference internal" href="#generate-the-image">20.1.4. Generate the Image</a></li>
<li><a class="reference internal" href="#image-repository">20.1.5. Image Repository</a></li>
<li><a class="reference internal" href="#register-image">20.1.6. Register Image</a></li>
<li><a class="reference internal" href="#start-image">20.1.7. Start Image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#futuregrid-standalone-image-repository">20.2. FutureGrid Standalone Image Repository</a><ul>
<li><a class="reference internal" href="#requirement">20.2.1. Requirement</a></li>
<li><a class="reference internal" href="#software">20.2.2. Software</a></li>
<li><a class="reference internal" href="#documentation">20.2.3. Documentation</a><ul>
<li><a class="reference internal" href="#user-manual">20.2.3.1. User Manual</a></li>
<li><a class="reference internal" href="#installation">20.2.3.2. Installation</a></li>
<li><a class="reference internal" href="#configuration">20.2.3.3. Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#manual-image-customization">20.3. Manual Image Customization</a><ul>
<li><a class="reference internal" href="#logging-into-india">20.3.1. Logging into India</a></li>
<li><a class="reference internal" href="#requesting-access">20.3.2. Requesting access</a></li>
<li><a class="reference internal" href="#obtaining-the-image">20.3.3. Obtaining the image</a><ul>
<li><a class="reference internal" href="#getting-an-image-from-the-repository">20.3.3.1. Getting an image from the repository</a></li>
<li><a class="reference internal" href="#generating-a-new-image">20.3.3.2. Generating a new image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customizing-the-image">20.3.4. Customizing the image</a></li>
<li><a class="reference internal" href="#transfer-the-image-back-to-india">20.3.5. Transfer the image back to India</a></li>
<li><a class="reference internal" href="#id1">20.3.6. Log into India</a></li>
<li><a class="reference internal" href="#upload-the-image-to-the-repository">20.3.7. Upload the image to the repository</a></li>
<li><a class="reference internal" href="#register-your-image-in-different-infrastructures">20.3.8. Register your image in different infrastructures</a><ul>
<li><a class="reference internal" href="#register-the-image-in-openstack">20.3.8.1. Register the image in Openstack</a></li>
<li><a class="reference internal" href="#register-the-image-in-eucalyptus">20.3.8.2. Register the image in Eucalyptus</a></li>
<li><a class="reference internal" href="#register-the-image-in-hpc">20.3.8.3. Register the image in HPC</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-your-registered-image">20.3.9. Using your Registered Image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rain-manual-pages">20.4. RAIN Manual Pages</a><ul>
<li><a class="reference internal" href="#fg-portal-manage">20.4.1. fg-portal-manage</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
            
            
              
  <li><a href="precip.html"
         title="previous chapter">&laquo; 19. Precip</a></li>
  <li><a href="pegasus.html"
         title="next chapter">21. Pegasus (Matts) &raquo;</a></li>
            
            
              <li>
  <a href="_sources/rain.txt"
     rel="nofollow">Source</a></li>
            
          </ul>

          
            
<form class="navbar-search pull-right" action="search.html" method="get">
  <input type="text" name="q" class="search-query" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
  
  <div class="section" id="rain">
<h1>20. RAIN<a class="headerlink" href="#rain" title="Permalink to this headline">¶</a></h1>
<div class="sidebar">
<p class="first sidebar-title">Page Contents</p>
<div class="contents local last topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#generate-and-register-an-os-image-on-futuregrid-using-the-fg-shell" id="id2">Generate and Register an OS Image on FutureGrid using the FG Shell</a><ul>
<li><a class="reference internal" href="#request-access" id="id3">Request access</a></li>
<li><a class="reference internal" href="#log-into-india" id="id4">Log into India</a></li>
<li><a class="reference internal" href="#start-the-shell" id="id5">Start the Shell</a></li>
<li><a class="reference internal" href="#generate-the-image" id="id6">Generate the Image</a></li>
<li><a class="reference internal" href="#image-repository" id="id7">Image Repository</a></li>
<li><a class="reference internal" href="#register-image" id="id8">Register Image</a></li>
<li><a class="reference internal" href="#start-image" id="id9">Start Image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#futuregrid-standalone-image-repository" id="id10">FutureGrid Standalone Image Repository</a><ul>
<li><a class="reference internal" href="#requirement" id="id11">Requirement</a></li>
<li><a class="reference internal" href="#software" id="id12">Software</a></li>
<li><a class="reference internal" href="#documentation" id="id13">Documentation</a><ul>
<li><a class="reference internal" href="#user-manual" id="id14">User Manual</a></li>
<li><a class="reference internal" href="#installation" id="id15">Installation</a></li>
<li><a class="reference internal" href="#configuration" id="id16">Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#manual-image-customization" id="id17">Manual Image Customization</a><ul>
<li><a class="reference internal" href="#logging-into-india" id="id18">Logging into India</a></li>
<li><a class="reference internal" href="#requesting-access" id="id19">Requesting access</a></li>
<li><a class="reference internal" href="#obtaining-the-image" id="id20">Obtaining the image</a><ul>
<li><a class="reference internal" href="#getting-an-image-from-the-repository" id="id21">Getting an image from the repository</a></li>
<li><a class="reference internal" href="#generating-a-new-image" id="id22">Generating a new image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customizing-the-image" id="id23">Customizing the image</a></li>
<li><a class="reference internal" href="#transfer-the-image-back-to-india" id="id24">Transfer the image back to India</a></li>
<li><a class="reference internal" href="#id1" id="id25">Log into India</a></li>
<li><a class="reference internal" href="#upload-the-image-to-the-repository" id="id26">Upload the image to the repository</a></li>
<li><a class="reference internal" href="#register-your-image-in-different-infrastructures" id="id27">Register your image in different infrastructures</a><ul>
<li><a class="reference internal" href="#register-the-image-in-openstack" id="id28">Register the image in Openstack</a></li>
<li><a class="reference internal" href="#register-the-image-in-eucalyptus" id="id29">Register the image in Eucalyptus</a></li>
<li><a class="reference internal" href="#register-the-image-in-hpc" id="id30">Register the image in HPC</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-your-registered-image" id="id31">Using your Registered Image</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rain-manual-pages" id="id32">RAIN Manual Pages</a><ul>
<li><a class="reference internal" href="#fg-portal-manage" id="id33">fg-portal-manage</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>FutureGrid image management defines the full lifecycle of the images
in FutureGrid. It involves the process of creating, customizing,
storing, sharing, and deploying images for different FutureGrid
environments. For information and instructions on managing your images
in FutureGrid, and the Rain environment, see the <a class="reference external" href="http://futuregrid.github.com/rain/quickstart.html">Quickstart Guide</a>.</p>
<div class="section" id="generate-and-register-an-os-image-on-futuregrid-using-the-fg-shell">
<h2><a class="toc-backref" href="#id2">20.1. Generate and Register an OS Image on FutureGrid using the FG Shell</a><a class="headerlink" href="#generate-and-register-an-os-image-on-futuregrid-using-the-fg-shell" title="Permalink to this headline">¶</a></h2>
<p>Below, we summarize the different steps needed to create a new image
and register it in a FutureGrid infrastructure. In this case, we will
register the image in OpenStack, but it can be registered in any other
FutureGrid infrastructure, such as Eucalyptus, Nimbus, or HPC. Detailed
information about these tools can be found
in  <a class="reference external" href="http://futuregrid.github.com/rain/">http://futuregrid.github.com/rain/</a>.</p>
<div class="section" id="request-access">
<h3><a class="toc-backref" href="#id3">20.1.1. Request access</a><a class="headerlink" href="#request-access" title="Permalink to this headline">¶</a></h3>
<p>Submit a ticket to request
access <a class="reference external" href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a></p>
<p>Please use the subject: &#8220;Request to access FutureGrid Rain&#8221;. Include
in the body &#8220;I would like to obtain access to FutureGrid Rain&#8221;.</p>
<p><em>Note: In future we may just create a checkbox for this request in the
help form.</em></p>
<p>Once you have access, you can continue the tutorial. Typically, it will
take a business day for you to get added (a business day is 9am-5pm EST
Mon-Fri).</p>
</div>
<div class="section" id="log-into-india">
<h3><a class="toc-backref" href="#id4">20.1.2. Log into India</a><a class="headerlink" href="#log-into-india" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ ssh &lt;username&gt;@india.futuregrid.org
$ module load futuregrid</pre>
</div>
</div>
<div class="section" id="start-the-shell">
<h3><a class="toc-backref" href="#id5">20.1.3. Start the Shell</a><a class="headerlink" href="#start-the-shell" title="Permalink to this headline">¶</a></h3>
<p>Execute the FG Shell. Please remember to replace &lt;username&gt; with your
portal user name. Then, you will be asked for a password (which is your
portal password):</p>
<div class="highlight-python"><pre>$ fg-shell -u &lt;username&gt;</pre>
</div>
<p>This command will change your shell and the prompt will be fg-rain&gt;. If
your prompt is different, you need to execute &#8220;use rain&#8221;.</p>
</div>
<div class="section" id="generate-the-image">
<h3><a class="toc-backref" href="#id6">20.1.4. Generate the Image</a><a class="headerlink" href="#generate-the-image" title="Permalink to this headline">¶</a></h3>
<p>We are going to generate an Ubuntu 12.04 image. The -s parameter
allows you to specify the software you want to install in your image.
Currently, only the software available in the official repositories can
be installed:</p>
<div class="highlight-python"><pre>fg-rain&gt; generate -o ubuntu -v 12.04 -a x86_64 -s wget, openmpi-bin</pre>
</div>
<p>After a while, your image will be stored in the repository, and your
image ID will be printed.</p>
</div>
<div class="section" id="image-repository">
<h3><a class="toc-backref" href="#id7">20.1.5. Image Repository</a><a class="headerlink" href="#image-repository" title="Permalink to this headline">¶</a></h3>
<p>We can consult the information of the image by executing the following
(please replace &lt;imageid&gt; with the ID that you got from the previous
command):</p>
<div class="highlight-python"><pre>fg-rain&gt; list * where imgId=&lt;imageId&gt;</pre>
</div>
</div>
<div class="section" id="register-image">
<h3><a class="toc-backref" href="#id8">20.1.6. Register Image</a><a class="headerlink" href="#register-image" title="Permalink to this headline">¶</a></h3>
<p>Next, we need to register that image in the infrastructure we want to
use. In this case, we will register the image in OpenStack (if you
followed the FG Openstack tutorial, your novarc will probably be in
~/openstack/novarc). This command will return an &lt;ami-ID&gt;, which is the
ID of the image in OpenStack:</p>
<div class="highlight-python"><pre>fg-rain&gt; register -r &lt;imageId&gt; -s india -v ~/novarc</pre>
</div>
<p>Once you have registered the image, you need to wait until it becames
available. To check the status of the image, you can execute the
following command:</p>
<div class="highlight-python"><pre>fg-rain&gt; cloudlist -s india -v ~/novarc | grep &lt;imageId&gt;</pre>
</div>
<p>The status is the second field. You may experience that this command
takes time to respond when the image is being uploaded (it is an
OpenStack issue).</p>
</div>
<div class="section" id="start-image">
<h3><a class="toc-backref" href="#id9">20.1.7. Start Image</a><a class="headerlink" href="#start-image" title="Permalink to this headline">¶</a></h3>
<p>Once the image is in &#8220;available&#8221; status, we can proceed to start a VM
using the ami-ID that we got from the register command. In this case, we
are going in Interative mode, which means that we are going to get
logged into the VM once it is running:</p>
<div class="highlight-python"><pre>fg-rain&gt; launch -i &lt;ami-ID&gt; -s india -v ~/novarc -I</pre>
</div>
</div>
</div>
<div class="section" id="futuregrid-standalone-image-repository">
<h2><a class="toc-backref" href="#id10">20.2. FutureGrid Standalone Image Repository</a><a class="headerlink" href="#futuregrid-standalone-image-repository" title="Permalink to this headline">¶</a></h2>
<p>The FutureGrid image repository is a standalone service that is not
tied to FutureGrid nor to any IaaS infrastructure. This image repository
offers a common interface that can distinguish image types for different
IaaS frameworks like Nimbus, Eucalyptus, and also bare-metal images.
This allows us in FG to include a diverse image set not only contributed
by the FG development team, but also by the user community that
generates such images and wishes to share them. The images can be
described with information about the software stack that is installed on
them including versions, libraries, and available services. This
information is maintained in the catalog and can be searched by users
and/or other FutureGrid services. Users looking for a specific image can
discover available images ﬁtting their needs, and ﬁnd their location in
the repository by using the catalog interface.</p>
<p>The repository supports different storage systems that allow you to
choose the most appropriate one for you. It includes MySQL, where the
image ﬁles are stored directly in the POSIX ﬁle system; MongoDB, where
both data and ﬁles are stored in the NoSQL database; the OpenStack
Object Store (Swift); and Cumulus from the Nimbus project. For the last
two cases, the data can be stored in either MySQL or in MongoDB. These
storage plugins not only increase the interoperability of the image
repository, but can also be used by the community as templates to create
their own plugins to support other storage systems.</p>
<div class="section" id="requirement">
<h3><a class="toc-backref" href="#id11">20.2.1. Requirement</a><a class="headerlink" href="#requirement" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Python 2.6 or 2.7</li>
<li>LDAP server for user authentication</li>
</ul>
</div>
<div class="section" id="software">
<h3><a class="toc-backref" href="#id12">20.2.2. Software</a><a class="headerlink" href="#software" title="Permalink to this headline">¶</a></h3>
<p>The software is open-source under an Apache 2 license. The image
repository can be found in github as part of our Image Management and
Rain
software  <a class="reference external" href="https://github.com/futuregrid/rain">https://github.com/futuregrid/rain</a> .</p>
</div>
<div class="section" id="documentation">
<h3><a class="toc-backref" href="#id13">20.2.3. Documentation</a><a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<p>The documentation can be found
in  <a class="reference external" href="http://futuregrid.github.com/rain/index.html">http://futuregrid.github.com/rain/index.html</a>.
Since this link provides information about all our tools, in this
section we collect the links that refer to the image repository.</p>
<div class="section" id="user-manual">
<h4><a class="toc-backref" href="#id14">20.2.3.1. User Manual</a><a class="headerlink" href="#user-manual" title="Permalink to this headline">¶</a></h4>
<p>Information about the command-line interface is found
in  <a class="reference external" href="http://futuregrid.github.com/rain/man-repo.html">http://futuregrid.github.com/rain/man-repo.html</a>.
If you are interested on using the shell, the manual is
in  <a class="reference external" href="http://futuregrid.github.com/rain/man-shell.html">http://futuregrid.github.com/rain/man-shell.html</a>.</p>
</div>
<div class="section" id="installation">
<h4><a class="toc-backref" href="#id15">20.2.3.2. Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h4>
<p>You need to install the complete software, even if you only want to
use the image repository. This information is found
in  <a class="reference external" href="http://futuregrid.github.com/rain/install.html">http://futuregrid.github.com/rain/install.html</a>.</p>
</div>
<div class="section" id="configuration">
<h4><a class="toc-backref" href="#id16">20.2.3.3. Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<p>The configuration information can be found
in  <a class="reference external" href="http://futuregrid.github.com/rain/configure_futuregrid.html">http://futuregrid.github.com/rain/configure_futuregrid.html</a>.
You will be interested in:</p>
<ul class="simple">
<li>Configuration
files  <a class="reference external" href="http://futuregrid.github.com/rain/configure_futuregrid.html#configuration-files">http://futuregrid.github.com/rain/configure_futuregrid.html#configuration-files</a></li>
<li>Setting up LDAP
information  <a class="reference external" href="http://futuregrid.github.com/rain/configure_futuregrid.html#setting-up-ldap">http://futuregrid.github.com/rain/configure_futuregrid.html#setting-up-ldap</a></li>
<li>Setting up the Image
Repository  <a class="reference external" href="http://futuregrid.github.com/rain/configure_futuregrid.html#setting-up-the-image-repository">http://futuregrid.github.com/rain/configure_futuregrid.html#setting-up-the-image-repository</a></li>
</ul>
</div>
</div>
</div>
<div class="section" id="manual-image-customization">
<h2><a class="toc-backref" href="#id17">20.3. Manual Image Customization</a><a class="headerlink" href="#manual-image-customization" title="Permalink to this headline">¶</a></h2>
<p>Sometimes users need to further customize their images by installing
their own software-software which may not be able to be installed with
the image generation tool. In this tutorial, we explain how users can
perform this customization in the images created with the FG image
generation tool. Detailed information about FG image management tools
can be found in
<a class="reference external" href="http://futuregrid.github.com/rain/">http://futuregrid.github.com/rain/</a>.</p>
<div class="section" id="logging-into-india">
<h3><a class="toc-backref" href="#id18">20.3.1. Logging into India</a><a class="headerlink" href="#logging-into-india" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ ssh &lt;username&gt;@india.futuregrid.org
$ module load futuregrid</pre>
</div>
<ul class="simple">
<li></li>
</ul>
</div>
<div class="section" id="requesting-access">
<h3><a class="toc-backref" href="#id19">20.3.2. Requesting access</a><a class="headerlink" href="#requesting-access" title="Permalink to this headline">¶</a></h3>
<p>Submit a ticket to request
access  <a class="reference external" href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a></p>
</div>
<div class="section" id="obtaining-the-image">
<h3><a class="toc-backref" href="#id20">20.3.3. Obtaining the image</a><a class="headerlink" href="#obtaining-the-image" title="Permalink to this headline">¶</a></h3>
<p>You can get your image from our repository, or generate a new one.</p>
<div class="section" id="getting-an-image-from-the-repository">
<h4><a class="toc-backref" href="#id21">20.3.3.1. Getting an image from the repository</a><a class="headerlink" href="#getting-an-image-from-the-repository" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><pre>$ fg-repo -u &lt;username&gt; -g &lt;imageId&gt;</pre>
</div>
</div>
<div class="section" id="generating-a-new-image">
<h4><a class="toc-backref" href="#id22">20.3.3.2. Generating a new image</a><a class="headerlink" href="#generating-a-new-image" title="Permalink to this headline">¶</a></h4>
<p>We are going to generate an Ubuntu image. Since we want to modify the
image, we have specified the -g parameter to retrieve the image after it
is generated. By default, it is uploaded to the image repository:</p>
<div class="highlight-python"><pre>$ fg-generate -u jdiaz -o ubuntu -v 12.04 -a x86_64 -s wget, openmpi-bin -g</pre>
</div>
<p>In both cases, we will obtain a tgz file that contains the image file
(.img) and a manifest (.manifest.xml). For example, our image could be
in <em>/N/u/&lt;username&gt;/123123123.tgz</em> .</p>
</div>
</div>
<div class="section" id="customizing-the-image">
<h3><a class="toc-backref" href="#id23">20.3.4. Customizing the image</a><a class="headerlink" href="#customizing-the-image" title="Permalink to this headline">¶</a></h3>
<p>To continue with the rest of the tutorial, we need a UNIX machine
where we have root privileges.</p>
<p>Assuming that we are in a UNIX machine with root privileges:</p>
<ol class="arabic">
<li><p class="first">Retrieve the image from India:</p>
<div class="highlight-python"><pre>$ scp &lt;username&gt;@india.futuregrid.org:/N/u/&lt;username/123123123.tgz .</pre>
</div>
</li>
<li><p class="first">Decompress the image:</p>
<div class="highlight-python"><pre>$ tar vxfz 123123123.tgz

jdiaz859434.img
jdiaz859434.manifest.xml</pre>
</div>
</li>
</ol>
<p>3. Mount the image. This will mount the image file into a directory.
In this way, we will have access to the OS files that are inside the
image:</p>
<div class="highlight-python"><pre>$ mkdir image
$ sudo mount -o loop jdiaz859434.img image</pre>
</div>
<p>Copy your software into the image directory (if needed). In this case,
I am going to copy a software directory to the tmp directory of the
image:</p>
<div class="highlight-python"><pre>$ cp -r /home/javi/mysoftware image/tmp</pre>
</div>
<p><em>Chroot</em> into the image. This changes the root of the OS to the one of
the image. In this way, evey operation we execute will have effect only
inside the image. After executing this command, you will be the root
users inside the image:</p>
<div class="highlight-python"><pre>$ sudo chroot image</pre>
</div>
<p>Now you can install whatever software you need. You can also use
<em>yum/apt</em> to install packages from the software repository. Remember
that they will be installed inside the image. As example, here I install
tomcat with <em>apt</em> and compile my software with <em>make</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># apt-get install tomcat6</span>
<span class="c"># cd /tmp/mysoftware</span>
<span class="c"># make &amp;&amp; make install</span>
</pre></div>
</div>
<p>You can also configure the OS of image to start services during the
boot time. The easiest way to do that is by modifying
the<em>/etc/rc.local</em>file.</p>
<p>Once you have finished customizing your image, you need to exit from
the <em>chroot</em> command, unmount the image, and compress it again:</p>
<div class="highlight-python"><pre># exit
$ sudo umount image
$ tar vxfz mynewimage.tgz jdiaz859434.img jdiaz859434.manifest.xml</pre>
</div>
</div>
<div class="section" id="transfer-the-image-back-to-india">
<h3><a class="toc-backref" href="#id24">20.3.5. Transfer the image back to India</a><a class="headerlink" href="#transfer-the-image-back-to-india" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ scp mynewimage.tgz &lt;username&gt;@india.futuregrid.org:/N/u/&lt;username&gt;/</pre>
</div>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id25">20.3.6. Log into India</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><pre>$ ssh &lt;username&gt;@india.futuregrid.org
$ module load futuregrid</pre>
</div>
</div>
<div class="section" id="upload-the-image-to-the-repository">
<h3><a class="toc-backref" href="#id26">20.3.7. Upload the image to the repository</a><a class="headerlink" href="#upload-the-image-to-the-repository" title="Permalink to this headline">¶</a></h3>
<p>We upload the image to the repository so we can reuse it and share it
with other users. When uploading the image, you can specify some
metadata to describe the properties of the image:</p>
<div class="highlight-python"><pre>$ fg-repo -p mynewimage.tgz "os=Ubuntu12 &amp; arch=x86_64 &amp; description=My new customized image &amp; tag=tomcat, openmpi"</pre>
</div>
<p>This command will provide you the ID your image has in the repository.
This ID is needed for the next step.</p>
</div>
<div class="section" id="register-your-image-in-different-infrastructures">
<h3><a class="toc-backref" href="#id27">20.3.8. Register your image in different infrastructures</a><a class="headerlink" href="#register-your-image-in-different-infrastructures" title="Permalink to this headline">¶</a></h3>
<p>You now have your image ready to be registered in the different
FutureGrid infrastructures. To use OpenStack
(<a class="reference external" href="https://portal.futuregrid.org/tutorials/openstack">tutorial</a>) and
Eucalyptus
(<a class="reference external" href="https://portal.futuregrid.org/tutorials/eucalyptus3">tutorial</a>),
you need to indicate the location of you novarc and eucarc file.</p>
<div class="section" id="register-the-image-in-openstack">
<h4><a class="toc-backref" href="#id28">20.3.8.1. Register the image in Openstack</a><a class="headerlink" href="#register-the-image-in-openstack" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><pre>$ fg-register -u &lt;username&gt; -r &lt;imageID&gt; -s india -v ~/novarc</pre>
</div>
</div>
<div class="section" id="register-the-image-in-eucalyptus">
<h4><a class="toc-backref" href="#id29">20.3.8.2. Register the image in Eucalyptus</a><a class="headerlink" href="#register-the-image-in-eucalyptus" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><pre>$ fg-register -u &lt;username&gt; -r &lt;imageID&gt; -e india -v ~/eucarc</pre>
</div>
</div>
<div class="section" id="register-the-image-in-hpc">
<h4><a class="toc-backref" href="#id30">20.3.8.3. Register the image in HPC</a><a class="headerlink" href="#register-the-image-in-hpc" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><pre>$ fg-register -u &lt;username&gt; -r &lt;imageID&gt; -x india</pre>
</div>
<p>Each command will provide you with the ami-ID that your image has in
the specified infrastructure.</p>
</div>
</div>
<div class="section" id="using-your-registered-image">
<h3><a class="toc-backref" href="#id31">20.3.9. Using your Registered Image</a><a class="headerlink" href="#using-your-registered-image" title="Permalink to this headline">¶</a></h3>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">fix the links in this section</p>
</div>
<p>OpenStack (more info in  <a class="reference external" href="https://portal.futuregrid.org/tutorials/openstack">https://portal.futuregrid.org/tutorials/openstack</a>):</p>
<div class="highlight-python"><pre>source novarc
euca-run-instance -k &lt;keyname&gt; &lt;ami-ID&gt;</pre>
</div>
<p>Eucalyptus (more info in  <a class="reference external" href="https://portal.futuregrid.org/tutorials/eucalyptus3">https://portal.futuregrid.org/tutorials/eucalyptus3</a>):</p>
<div class="highlight-python"><pre>source eucarc
euca-run-instance -k &lt;keyname&gt; &lt;ami-ID&gt;</pre>
</div>
<p>HPC (more info in  <a class="reference external" href="https://portal.futuregrid.org/tutorials/hpc">https://portal.futuregrid.org/tutorials/hpc</a>):</p>
<p>Provision a machine with our image and go into Interactive mode (you
are logged into the machine):</p>
<div class="highlight-python"><pre>qsub -l os=&lt;ami-ID&gt; -I</pre>
</div>
<p>Provision two machines with our image and execute an script:</p>
<div class="highlight-python"><pre>qsub -l os=&lt;ami-ID&gt; -l nodes=2:ppn=8 myscript.sh</pre>
</div>
</div>
</div>
<div class="section" id="rain-manual-pages">
<h2><a class="toc-backref" href="#id32">20.4. RAIN Manual Pages</a><a class="headerlink" href="#rain-manual-pages" title="Permalink to this headline">¶</a></h2>
<p>FutureGrid provides a number of manual pages, listed below.</p>
<p>(For Rain, our up-to-date documentation of rain can be found at
<a class="reference external" href="https://portal.futuregrid.org/doc/rain/index.html">https://portal.futuregrid.org/doc/rain/index.html</a>
and<a class="reference external" href="http://futuregrid.github.com/rain/index.html">http://futuregrid.github.com/rain/index.html</a>
.</p>
<ul class="simple">
<li><a class="reference external" href="http://futuregrid.github.com/rain/man-repo.html">fg-repo</a></li>
<li><a class="reference external" href="http://futuregrid.github.com/rain/man-rain.html">fg-rain</a></li>
<li><a class="reference external" href="http://futuregrid.github.com/rain/man-generate.html">fg-generate</a></li>
<li><a class="reference external" href="http://futuregrid.github.com/rain/man-register.html">fg-register</a></li>
<li><a class="reference external" href="http://futuregrid.github.com/rain/man-shell.html">fg-shell</a></li>
</ul>
<div class="section" id="fg-portal-manage">
<h3><a class="toc-backref" href="#id33">20.4.1. fg-portal-manage</a><a class="headerlink" href="#fg-portal-manage" title="Permalink to this headline">¶</a></h3>
<p>The tool is for admin purpose only. An admin person or an system script
can call this to get user/project information from the portal:</p>
<div class="highlight-python"><pre>fg-portal-manage
 -h, --help            show this help message and exit
 -n NAME, --name=NAME  querying by name
 -m MAIL, --mail=MAIL  querying by email
 -i UID, --uid=UID     querying by portal uid
 -u USERNAME, --username=USERNAME
                       querying by portal username
 -k, --attrib          specifying attrib(s) to be displayed, inlcuding:
                       firstname, lastname, email, phone, organization,
                       institution_name, citizenship, sshkey, projectall,
                       project
 -l, --ldif            output ldif format of user info(no dn). If provided
                       all attributes will be included in the output
                       disregarding the setting from -k
 -v, --vetted          Show only those vetted users. If omitted all users
                       that meet the creteria will be shown
 -w, --waiting         Show the waiting list in which a user is eligible to
                       get an LDAP account
 -y, --withsshkey      A sub-option for -w, which shows the waiting list, but
                       only for those who have submitted a sshkey
 -p, --project         Get list of project in table view
 -s STATUS, --status=STATUS
                       A sub-option for -p, which specifies project status
                       that would like to be retrieved. Try pending,
                       approved, completed, denied
 -1, --pidonly         A sub-option for -p which prints out only the project</pre>
</div>
<p>FutureGrid account admin tool queries user profile info from the portal
and also checks status against the ldap.</p>
<p>To run the script, python 2.7 is needed (if trying on lower version, try
to install the argparse module; it may also work), as well as the
mysqldb module. Depending on the os distribution, the installation could
be different. E.g., in ubuntu, it&#8217;s simply: apt-get install
python-mysqldb .</p>
<p>The futuregrid.cfg file needs to be put into the same directory as the
script, and the dummy config values need to be replaced with those real
ones. (Whoever has access to the portal server should have knowledge on
this. We will not distribute this to anymore other than the portal admin
and sys admin.)</p>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">fix this command</p>
</div>
<p>Run this to get the help info:</p>
<div class="highlight-python"><pre>./fg-portal-manage.py -h</pre>
</div>
<p>This will give a table viewed info of user with uid 3:</p>
<div class="highlight-python"><pre>./fg-portal-manage.py -i 3</pre>
</div>
<p>However, the following:</p>
<div class="highlight-python"><pre>./fg-portal-manage.py -i 3 -l</pre>
</div>
<p>will print the long quasi-ldif formatted info.</p>
<p>Other command:</p>
<div class="highlight-python"><pre>-u for username; -n for realname(first or last); as well as -m for email does similar thing</pre>
</div>
<div class="highlight-python"><pre>./fg-portal-manage.py -l</pre>
</div>
<p>-will simply print out all users in the portal in the ldif-like format.</p>
<div class="highlight-python"><pre>./fg-portal-manage.py -l -v</pre>
</div>
<p>-will print out a similar list but only for (all) those vetted users,
i.e., approved users with an active project.</p>
<dl class="docutils">
<dt>::</dt>
<dd>./fg-portal-manage.py -w</dd>
</dl>
<p>-prints out all users who have approved portal account and are members
of an active project(s) (i.e., vetted users), but don&#8217;t have an LDAP
account yet.</p>
<div class="highlight-python"><pre>./fg-portal-manage.py -l -w</pre>
</div>
<p>-the same as -w but in long quasi-ldif format.</p>
<div class="highlight-python"><pre>./fg-portal-manage.py -w -y</pre>
</div>
<p>-the same as -w, but prints out only those who have submitted a sshkey.</p>
<div class="highlight-python"><pre>./fg-portal-manage.py -p</pre>
</div>
<p>-lists all FG projects registered in the portal, in the format of:</p>
<div class="highlight-python"><pre>pid: title|project lead|project manager|status|[members list]</pre>
</div>
<p>-project lead/manager and members are represented by the portaluid.</p>
<div class="highlight-python"><pre>./fg-portal-manage.py -p -s approved</pre>
</div>
<p>-prints a list of projects but only those in &#8216;approved&#8217; status. Other
valid statuses are: pending, completed, denied.</p>
<div class="highlight-python"><pre>./fg-portal-manage.py -p -s completed -1(number '1')</pre>
</div>
<p>-prints a list of completed projects but only display the projectids.</p>
</div>
</div>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>